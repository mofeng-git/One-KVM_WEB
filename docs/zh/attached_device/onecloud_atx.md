### 玩客云 GPIO 引脚说明

玩客云主板预留了多个 GPIO 接口，可用于实现开关机等功能控制。WIFI 焊盘的编号规则是从左下角开始逆时针递增。

![WIFI 焊盘示意图](../img/oneclou_gpio_list.png)

#### GPIO 引脚对照表

以下是可用的 GPIO 引脚与焊盘对应关系：

```
GPIO-430  焊盘19  默认输入模式
GPIO-431  焊盘14  默认输入模式
GPIO-432  焊盘15  默认输入模式
GPIO-433  焊盘27  默认输入模式
GPIO-434  焊盘25  默认输入模式
GPIO-435  焊盘28  默认输入模式
GPIO-436  焊盘26  默认输入模式
GPIO-437  焊盘17  默认输入模式
GPIO-438  焊盘16  默认输入模式
GPIO-440  焊盘12  默认输入模式
GPIO-441  焊盘43  默认输入模式
GPIO-442  焊盘42  默认输入模式
GPIO-444  焊盘44  默认输入模式
GPIO-445  焊盘34  默认输入模式
GPIO-446  焊盘13  默认输入模式
```

#### GPIO 使用示例

以 26 号焊盘为例，说明如何确定其对应的 GPIO 配置：

1. 通过物理位置找到焊盘 26，对应的 sysfs gpio 编号为 gpio-436

    - 注意：6.x 及以上版本 Linux 内核需要加上 91 的偏移量，即为 gpio-527

2. 根据软件标识名称 "J2 Header Pin 16" 可找到对应的 gpioinfo 编号为 gpiochip0 line7

3. 在 `/etc/kvmd/custom_atx/gpio.sh` 中使用以下命令控制该 GPIO：

```bash
gpioset -m time -s 1 gpiochip0 7=0
gpioset gpiochip0 7=1
```

### GPIO 直连方案

!!! warning "注意事项"

    - 此方案可能不适用于非标准 ATX 电源管理设备
    - 华南金牌 X99-F8 和 K9-ETH 主板用户请注意：

        - GPIO 需接入开机跳线 7 脚，GND 需接入 9 脚（而非常规的 57 脚），接线错误可能导致主板无法开机或 RST 键失效

本方案适用于新旧版本玩客云，通过红外接口预留的 GPIO 实现物理开关机控制：

1. 只需使用一组 GPIO 接口（3.3V 电平）
2. 在红外模块预留接口焊接两根引线：

    - GPIO-420 接开机引脚正极
    - GND 接开机引脚负极

![接线示意图 1](../img/1717947165712-59.jpeg)
![接线示意图 2](../img/1717947165712-60.jpeg)
![接线位置图](../img/1717947165712-62.png)

### 光耦隔离方案

为提高安全性，也可使用光耦隔离板进行连接：

![光耦板示意图](../img/1717947165712-63.png)
![实物连接图](../img/1717947165713-64.jpeg)

